<main class="page-wrapper shrink grow bg-gray-50 dark:bg-dark transition-colors duration-200">
	<div class="container mx-auto px-4 py-6 lg:py-8">
		<div class="gap-6 lg:flex">
			<!-- New Ticket -->
			<div class="dash_card min-w-[50%] tabs__wrapper grow-0 lg:basis-1/2 bg-white dark:bg-dark-secondary rounded-xl shadow-sm border border-gray-200 dark:border-dark-tertiary transition-all duration-200">
				<div class="tabs mb-6 flex basis-1/2 space-x-3 p-1 bg-gray-100 dark:bg-dark-tertiary rounded-lg">
					<a class="tab active flex items-center gap-2 px-4 py-2.5 rounded-md font-medium text-sm transition-all duration-200 bg-white dark:bg-dark-secondary text-primary-600 dark:text-primary-400 shadow-sm"
						data-tab="createTicket">
						<svg width="20" height="20" viewbox="0 0 24 28" fill="none" xmlns="http://www.w3.org/2000/svg"
							class="flex-shrink-0">
							<path
								d="M12 0.25L23.875 7.125V20.875L12 27.75L0.125 20.875V7.125L12 0.25ZM3.86735 7.84712L12.0001 12.5555L20.1327 7.84717L12 3.13875L3.86735 7.84712ZM2.625 10.0166V19.4336L10.7501 24.1376V14.7206L2.625 10.0166ZM13.2501 24.1375L21.375 19.4336V10.0167L13.2501 14.7206V24.1375Z"
								fill="currentColor"></path>
						</svg>
						<span>New Ticket</span>
					</a>
					<a class="tab flex items-center gap-2 px-4 py-2.5 rounded-md font-medium text-sm transition-all duration-200 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 relative"
						data-tab="ticketHistory" id="ticketHistoryButton">
						<svg width="20" height="20" viewbox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg"
							class="flex-shrink-0">
							<path
								d="M0.505859 8.875V2C0.505859 1.30964 1.06551 0.75 1.75586 0.75H24.2559C24.9463 0.75 25.5059 1.30964 25.5059 2V8.875C23.78 8.875 22.3809 10.2741 22.3809 12C22.3809 13.7259 23.78 15.125 25.5059 15.125V22C25.5059 22.6904 24.9463 23.25 24.2559 23.25H1.75586C1.06551 23.25 0.505859 22.6904 0.505859 22V15.125C2.23175 15.125 3.63086 13.7259 3.63086 12C3.63086 10.2741 2.23175 8.875 0.505859 8.875ZM15.5059 3.25H3.00586V6.9597C4.85801 7.88014 6.13086 9.79139 6.13086 12C6.13086 14.2085 4.85801 16.1199 3.00586 17.0403V20.75H15.5059V3.25ZM18.0059 3.25V20.75H23.0059V17.0403C21.1538 16.1199 19.8809 14.2085 19.8809 12C19.8809 9.79139 21.1538 7.88014 23.0059 6.9597V3.25H18.0059Z"
								fill="currentColor" />
						</svg>
						<span>Recent Tickets</span>
					</a>
				</div>
				<div class="tab__content-wrapper">

					<div data-tab-content="createTicket" id="createTicket" class="active">
						<script async src="https://imgbb.com/upload.js" data-auto-insert="viewer-links"></script>
						<form method="post" action="" id="ticketsend" class="space-y-6">
							<!-- Category Selection -->
							<div class="space-y-4">
								<div class="flex items-center gap-3 pb-3 border-b border-gray-200 dark:border-dark-tertiary">
									<div class="flex items-center justify-center w-10 h-10 rounded-lg bg-primary-500 dark:bg-primary-600 flex-shrink-0">
										<svg width="24" height="24" viewbox="0 0 25 26" fill="none"
											xmlns="http://www.w3.org/2000/svg">
											<rect y="0.875977" width="24.7422" height="24.2487" rx="9.69948"
												fill="white" />
											<path fill-rule="evenodd" clip-rule="evenodd"
												d="M6.90764 5.72656C6.28468 5.72656 5.77344 6.22968 5.77344 6.84053V10.8911C5.77344 11.502 6.28468 12.0051 6.90764 12.0051H11.0284C11.6513 12.0051 12.1626 11.502 12.1626 10.8911V6.84053C12.1626 6.22969 11.6513 5.72656 11.0284 5.72656H6.90764Z"
												fill="#00BFF3" />
											<path fill-rule="evenodd" clip-rule="evenodd"
												d="M14.5385 5.72656C13.9165 5.72656 13.4043 6.22895 13.4043 6.84053V10.8911C13.4043 11.5027 13.9165 12.0051 14.5385 12.0051H18.6608C19.2828 12.0051 19.7934 11.502 19.7934 10.8911V6.84053C19.7934 6.22969 19.2828 5.72656 18.6608 5.72656H14.5385Z"
												fill="#00BFF3" />
											<path fill-rule="evenodd" clip-rule="evenodd"
												d="M6.90764 13.1875C6.28391 13.1875 5.77344 13.6916 5.77344 14.3015V18.3536C5.77344 18.9635 6.28391 19.4676 6.90764 19.4676H11.0284C11.6521 19.4676 12.1626 18.9635 12.1626 18.3536V14.3015C12.1626 13.6916 11.6521 13.1875 11.0284 13.1875H6.90764Z"
												fill="#00BFF3" />
											<path fill-rule="evenodd" clip-rule="evenodd"
												d="M14.5385 13.1875C13.9157 13.1875 13.4043 13.6909 13.4043 14.3015V18.3536C13.4043 18.9642 13.9157 19.4676 14.5385 19.4676H18.6608C19.2836 19.4676 19.7934 18.9635 19.7934 18.3536V14.3015C19.7934 13.6916 19.2836 13.1875 18.6608 13.1875H14.5385Z"
												fill="#00BFF3" />
										</svg>
									</div>
									<p class="text-sm font-semibold text-gray-900 dark:text-gray-100">
										Choose Category
									</p>
								</div>
								<ul class="grid grid-cols-3 sm:grid-cols-3 gap-2 ticket-subject-list">
									<li>
										<input type="radio" id="subjectOrder" name="TicketForm[subject]"
											class="subject sr-only peer" value="Order" checked="checked" />
										<label for="subjectOrder" class="ticket-subject-card ticket-subject-card--order flex flex-col items-center justify-center p-3 border border-gray-200 dark:border-dark-tertiary rounded-lg cursor-pointer transition-all duration-200 peer-checked:border-primary-500 dark:peer-checked:border-primary-400 peer-checked:bg-primary-50 dark:peer-checked:bg-primary-900/20 hover:border-primary-300 dark:hover:border-primary-600 hover:bg-gray-50 dark:hover:bg-dark-tertiary">
											<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ticket-subject-icon mb-1.5">
												<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z" />
											</svg>
											<span class="text-xs font-medium text-gray-700 dark:text-gray-300">Order</span>
										</label>
									</li>
									<li>
										<input type="radio" id="subjectPayment" name="TicketForm[subject]"
											class="subject sr-only peer" value="Payment" />
										<label for="subjectPayment" class="ticket-subject-card ticket-subject-card--payment flex flex-col items-center justify-center p-3 border border-gray-200 dark:border-dark-tertiary rounded-lg cursor-pointer transition-all duration-200 peer-checked:border-primary-500 dark:peer-checked:border-primary-400 peer-checked:bg-primary-50 dark:peer-checked:bg-primary-900/20 hover:border-primary-300 dark:hover:border-primary-600 hover:bg-gray-50 dark:hover:bg-dark-tertiary">
											<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ticket-subject-icon mb-1.5">
												<path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z" />
											</svg>
											<span class="text-xs font-medium text-gray-700 dark:text-gray-300">Payment</span>
										</label>
									</li>
									<li>
										<input type="radio" id="subjectService" name="TicketForm[subject]"
											class="subject sr-only peer" value="Other" />
										<label for="subjectService" class="ticket-subject-card ticket-subject-card--other flex flex-col items-center justify-center p-3 border border-gray-200 dark:border-dark-tertiary rounded-lg cursor-pointer transition-all duration-200 peer-checked:border-primary-500 dark:peer-checked:border-primary-400 peer-checked:bg-primary-50 dark:peer-checked:bg-primary-900/20 hover:border-primary-300 dark:hover:border-primary-600 hover:bg-gray-50 dark:hover:bg-dark-tertiary">
											<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ticket-subject-icon mb-1.5">
												<path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" />
											</svg>

											<span class="text-xs font-medium text-gray-700 dark:text-gray-300">Other</span>
										</label>
									</li>
								</ul>
							</div>

							<!-- Request Type Selection (Only shown for Order category) -->
							<div
								class="therequest space-y-4 pb-4 border-b border-gray-200 dark:border-dark-tertiary">
								<div class="flex items-center gap-3">
									<div
										class="flex items-center justify-center w-10 h-10 rounded-lg bg-primary-100 dark:bg-primary-900/30 flex-shrink-0">
										<svg width="20" height="20" viewbox="0 0 24 24" fill="none"
											xmlns="http://www.w3.org/2000/svg">
											<path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"
												stroke-linecap="round" stroke-linejoin="round"
												class="text-primary-600 dark:text-primary-400" />
											<path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2"
												stroke-linecap="round" stroke-linejoin="round"
												class="text-primary-600 dark:text-primary-400" />
											<path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2"
												stroke-linecap="round" stroke-linejoin="round"
												class="text-primary-600 dark:text-primary-400" />
										</svg>
									</div>
									<p class="text-sm font-semibold text-gray-900 dark:text-gray-100">Request Type</p>
								</div>
								<ul class="grid grid-cols-2 sm:grid-cols-4 gap-2">
									<li>
										<input type="radio" class="second-options sr-only peer" value="Refill"
											name="request" id="requestRefill">
										<label for="requestRefill"
											class="request-type-card request-type-refill flex flex-col items-center justify-center p-3 border border-gray-200 dark:border-dark-tertiary rounded-lg cursor-pointer transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600">
											<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mb-1.5">
												<path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
													class="text-gray-600 dark:text-gray-400" />
												<path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
													class="text-gray-600 dark:text-gray-400" />
												<path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
													class="text-gray-600 dark:text-gray-400" />
											</svg>
											<span
												class="text-xs font-medium text-gray-700 dark:text-gray-300">Refill</span>
										</label>
									</li>
									<li>
										<input type="radio" class="second-options sr-only peer" value="Speed Up"
											name="request" id="requestSpeed" checked="checked">
										<label for="requestSpeed"
											class="request-type-card request-type-speed flex flex-col items-center justify-center p-3 border border-gray-200 dark:border-dark-tertiary rounded-lg cursor-pointer transition-all duration-200 hover:border-amber-300 dark:hover:border-amber-600">
											<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mb-1.5">
												<path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
													class="text-gray-600 dark:text-gray-400" />
											</svg>
											<span class="text-xs font-medium text-gray-700 dark:text-gray-300">Speed Up</span>
										</label>
									</li>
									<li>
										<input type="radio" class="second-options sr-only peer" value="Others"
											name="request" id="requestOthers">
										<label for="requestOthers"
											class="request-type-card request-type-others flex flex-col items-center justify-center p-3 border border-gray-200 dark:border-dark-tertiary rounded-lg cursor-pointer transition-all duration-200 hover:border-purple-300 dark:hover:border-purple-600">
											<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mb-1.5">
												<circle cx="12" cy="12" r="1" fill="currentColor"
													class="text-gray-600 dark:text-gray-400" />
												<circle cx="19" cy="12" r="1" fill="currentColor"
													class="text-gray-600 dark:text-gray-400" />
												<circle cx="5" cy="12" r="1" fill="currentColor"
													class="text-gray-600 dark:text-gray-400" />
											</svg>
											<span
												class="text-xs font-medium text-gray-700 dark:text-gray-300">Others</span>
										</label>
									</li>
									<li>
										<input type="radio" class="second-options sr-only peer" value="Cancellation"
											name="request" id="requestCancellation">
										<label for="requestCancellation"
											class="request-type-card request-type-cancellation flex flex-col items-center justify-center p-3 border border-gray-200 dark:border-dark-tertiary rounded-lg cursor-pointer transition-all duration-200 hover:border-red-300 dark:hover:border-red-600">
											<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mb-1.5">
												<circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"
													class="text-gray-600 dark:text-gray-400" />
												<path d="M15 9L9 15M9 9L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
													class="text-gray-600 dark:text-gray-400" />
											</svg>
											<span
												class="text-xs font-medium text-gray-700 dark:text-gray-300">Cancellation</span>
										</label>
									</li>
								</ul>
							</div>

							<!-- Order ID Field -->
							<div class="ordernumbers space-y-2">
								<label for="ordernumbers" class="block text-sm font-semibold text-gray-900 dark:text-gray-100">Order ID</label>
								<input type="text" name="title"
									class="w-full px-4 py-2.5 border border-gray-300 dark:border-dark-tertiary rounded-lg bg-white dark:bg-dark-secondary text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent transition-all duration-200"
									id="ordernumbers"
									placeholder="For multiple orders, please separate them using commas (example: 12345,12346)"
									required aria-label="Order ID">
							</div>

							<!-- Message Field -->
							<div class="message-block space-y-2">
								<label for="message"
									class="block text-sm font-semibold text-gray-900 dark:text-gray-100">Message</label>
								<textarea name="msg" id="message" rows="7"
									class="w-full px-4 py-2.5 border border-gray-300 dark:border-dark-tertiary rounded-lg bg-white dark:bg-dark-secondary text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent transition-all duration-200 resize-y"
									placeholder="Write Your Message Here.." required aria-label="Message"></textarea>
							</div>

							<!-- Submit Button -->
							<div class="pt-2">
								<input name="_csrf" value="{{csrftoken}}" type="hidden">
								<input type="hidden" name="TicketForm[message]" id="alldata">
								<button id="submit" type="submit"
									class="w-full btn btn--primary flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-medium text-white bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 dark:from-primary-600 dark:to-primary-700 dark:hover:from-primary-700 dark:hover:to-primary-800 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed">
									<span class="btn-label">Submit Ticket</span>
									<svg id="spinner" class="hidden h-5 w-5 animate-spin text-white"
										xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24">
										<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
											stroke-width="4"></circle>
										<path class="opacity-75" fill="currentColor"
											d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
									</svg>
								</button>
							</div>
						</form>
					</div>
					<div data-tab-content="ticketHistory" id="ticketHistory" class="hidden">
					<!-- Search Form -->
					<div class="mb-6">
						<form action="{{ page['url'] }}" method="get" id="history-search" class="{% if site['rtl'] %} rtl-search {% endif %}">
							<div class="relative">
								<input type="text"
									class="w-full px-4 py-2.5 pl-10 border border-gray-300 dark:border-dark-tertiary rounded-lg bg-white dark:bg-dark-secondary text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent transition-all duration-200"
									value="{{ search }}" name="search"
									placeholder="{{ lang('general.search.placeholder') }}">
								<svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-gray-500"
									fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
										d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
								</svg>
							</div>
						</form>
					</div>

					{% if ticketList %}
					<!-- Mobile Card View -->
					<div class="tickets-history">
						<div class="tickets-card-list grid gap-4 mb-6 md:hidden" role="list">
							{% for ticket in ticketList %}
							<a class="ticket-card ticket-card--{{ ticket['status']|lower|replace({' ': '-'}) }} block p-4 bg-white dark:bg-dark-secondary border border-gray-200 dark:border-dark-tertiary rounded-lg hover:shadow-md dark:hover:shadow-lg transition-all duration-200"
								href="{{ page_url('viewticket') }}/{{ ticket['id'] }}" role="listitem">
								<div class="ticket-card__header flex items-center justify-between mb-3">
									<div class="ticket-card__id-group flex items-center gap-2">
										<span class="ticket-card__id font-semibold text-gray-900 dark:text-gray-100">#{{ ticket['id'] }}</span>
										{% if ticket['new'] == 1 %}
											<span class="ticket-card__badge px-2 py-0.5 text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full">New</span>
										{% endif %}
									</div>
									<span class="ticket-card__status ticket-status--{{ ticket['status']|lower|replace({' ': '-'}) }} px-2.5 py-1 text-xs font-medium rounded-full">{{ ticket['status'] }}</span>
								</div>
								<div class="ticket-card__subject mb-3">
									{% if ticket['new'] == 1 %}
										<strong class="text-gray-900 dark:text-gray-100 font-semibold">{{ ticket['theme'] }}</strong>
									{% else %}
										<span class="text-gray-700 dark:text-gray-300">{{ ticket['theme'] }}</span>
									{% endif %}
								</div>
								<div class="ticket-card__meta flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
									<span class="ticket-card__meta-label">{{ lang('tickets.updated') }}</span>
									<span class="ticket-card__time">{{ ticket['time'] }}</span>
								</div>
								<span class="ticket-card__cta mt-3 inline-flex items-center text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300">
								View ticket →
								</span>
							</a>
							{% endfor %}
						</div>

						<!-- Desktop Table View -->
						<div class="tickets-table-wrapper hidden md:block overflow-x-auto">
							<table class="table w-full {% if site['rtl'] %} rtl-table {% endif %}" id="tickets-table">
								<thead class="bg-gray-50 dark:bg-dark-tertiary">
									<tr>
										<th
											class="px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">
											{{ lang('tickets.id') }}</th>
										<th
											class="px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">
											{{ lang('tickets.subject') }}</th>
										<th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">
											{{ lang('tickets.status') }} 
										</th>
										<th
											class="px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap">
											{{ lang('tickets.updated') }}</th>
									</tr>
								</thead>
								<tbody
									class="bg-white dark:bg-dark-secondary divide-y divide-gray-200 dark:divide-dark-tertiary">
									{% for ticket in ticketList %}
									<tr
										class="ticket-row ticket-row--{{ ticket['status']|lower|replace({' ': '-'}) }} hover:bg-gray-50 dark:hover:bg-dark-tertiary transition-colors duration-150">
										<td class="px-4 py-3 text-sm font-medium text-gray-900 dark:text-gray-100" data-label="ID">
											{{ ticket['id'] }}
										</td>
										{% if ticket['new'] == 1 %}
										<td class="px-4 py-3 text-sm" data-label="Subject">
											<a href="{{ page_url('viewticket') }}/{{ ticket['id'] }}"
												class="text-gray-900 dark:text-gray-100 hover:text-primary-600 dark:hover:text-primary-400 font-semibold break-words">
												{{ ticket['theme'] }}
											</a>
										</td>
										{% else %}
										<td class="px-4 py-3 text-sm" data-label="Subject">
											<a href="{{ page_url('viewticket') }}/{{ ticket['id'] }}"
												class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 break-words">{{ticket['theme']}}</a>
										</td>
										{% endif %}
										<td class="px-4 py-3 text-sm" data-label="Status">
											<span class="ticket-status--{{ ticket['status']|lower|replace({' ': '-'}) }} px-2.5 py-1 text-xs font-medium rounded-full">{{ ticket['status'] }}</span>
											{% if ticket['new'] == 1 %}
												<span class="ticket-card__badge px-2 py-0.5 text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full">New</span>
											{% endif %}
										</td>
										<td class="px-4 py-3 text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap"
											data-label="Last update">
											{{ ticket['time'] }}
										</td>
									</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
					{% endif %}
					{% if pagination['count'] > 50 %}
					<div class="mt-6 flex justify-center">
						<nav class="pagination" aria-label="Pagination">
							<ul class="flex items-center gap-2 {% if site['rtl'] %} rtl-pagination {% endif %}">
								{% if pagination['current'] != 1 %}
								<li>
									<a href="{{ page['url'] }}/{{ pagination['last'] }}"
										class="px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-secondary border border-gray-300 dark:border-dark-tertiary rounded-lg hover:bg-gray-50 dark:hover:bg-dark-tertiary transition-colors duration-200"
										aria-label="Previous">
										<span aria-hidden="true">&laquo;</span>
									</a>
								</li>
								{% endif %}

								{% set r, l = 3, 3 %}

								{% if pagination['current'] == 1 %}
								{% set r = 6 %}
								{% endif %}

								{% if pagination['current'] == 2 %}
								{% set r = 5 %}
								{% endif %}

								{% if pagination['current'] >= pagination['pages'] %}
								{% set l = 5 %}
								{% endif %}

								{% for i in 1..ceil(pagination['pages']) %}
								{% if i >= (pagination['current']-l) and i <= (pagination['current']+r) %}
								<li>
									<a href="{{ page['url'] }}/{{i}}"
										class="px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 {% if i == pagination['current'] %} bg-primary-500 text-white dark:bg-primary-600 dark:text-white {% else %} text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-secondary border border-gray-300 dark:border-dark-tertiary hover:bg-gray-50 dark:hover:bg-dark-tertiary {% endif %}">
										{{i}}
									</a>
								</li>
								{% endif %}
								{% endfor %}

								{% if pagination['current'] < pagination['pages'] %}
								<li>
									<a href="{{ page['url'] }}/{{ pagination['next'] }}"
										class="px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-secondary border border-gray-300 dark:border-dark-tertiary rounded-lg hover:bg-gray-50 dark:hover:bg-dark-tertiary transition-colors duration-200"
										aria-label="Next">
										<span aria-hidden="true">&raquo;</span>
									</a>
								</li>
								{% endif %}
							</ul>
						</nav>
					</div>
					{% endif %}
					</div>
				</div>
			</div>

			<!-- Customer support instructions -->
			<div class="dash_card min-w-[50%] lg:basis-1/2 bg-white dark:bg-dark-secondary rounded-xl shadow-sm border border-gray-200 dark:border-dark-tertiary transition-all duration-200 p-3">
				<div class="info-block rounded-xl bg-blue-50 dark:bg-primary-900/20 p-6 text-sm leading-8 text-gray-700 dark:text-gray-300 border border-blue-100 dark:border-primary-900/30">
					<h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4">Customer Support Instructions
					</h3>
					<ul class="space-y-2">
						<li class="flex items-start gap-2">
							<span class="text-green-500 dark:text-green-400 mt-0.5">✅</span>
							<span>Customer support team is available 24/7 to serve you</span>
						</li>
						<li class="flex items-start gap-2">
							<span class="text-green-500 dark:text-green-400 mt-0.5">✅</span>
							<span>Before sending a new ticket for you order, please read the average time for the selected
								service</span>
						</li>
						<li class="flex items-start gap-2">
							<span class="text-green-500 dark:text-green-400 mt-0.5">✅</span>
							<span>Notice to all users! Any misbehavior with our customer support will cause your account to
								be limited and/or potentially suspended.</span>
						</li>
						<li class="flex items-start gap-2">
							<span class="text-green-500 dark:text-green-400 mt-0.5">✅</span>
							<span>In order to proceed correctly, do not open more than one ticket for the same purpose or
								for the same order</span>
						</li>
					</ul>
				</div>
				<div class="info-block mt-6 rounded-xl bg-red-50 dark:bg-red-900/20 p-6 text-sm leading-8 border border-red-100 dark:border-red-900/30">
					<strong class="text-red-600 dark:text-red-400">Sometimes it can take up to 6 hours for us to respond, depending on the tickets overload.</strong>
				</div>
			</div>
		</div>


	</div>
</div>
</main>

<script>
	document.addEventListener('DOMContentLoaded', function() {
		// Initialize active tab text color on load
		const activeTabOnLoad = document.querySelector('.tab.active');
		if (activeTabOnLoad) {
			const activeSpans = activeTabOnLoad.querySelectorAll('span');
			const activeSvgs = activeTabOnLoad.querySelectorAll('svg path');
			activeSpans.forEach(span => {
				if (document.body.classList.contains('dark')) {
					span.style.color = '#4dd0e1';
				} else {
					span.style.color = '#0891b2';
				}
			});
			activeSvgs.forEach(svg => {
				if (document.body.classList.contains('dark')) {
					svg.style.fill = '#4dd0e1';
				} else {
					svg.style.fill = '#0891b2';
				}
			});
		}
		
		// Tab Switching Functionality
		const tabs = document.querySelectorAll('.tab[data-tab]');
		const tabContents = document.querySelectorAll('[data-tab-content]');
		tabs.forEach(tab => {
			tab.addEventListener('click', function(e) {
				e.preventDefault();
				const targetTab = this.getAttribute('data-tab');
				// Remove active class from all tabs
				tabs.forEach(t => {
					t.classList.remove('active', 'bg-white', 'dark:bg-dark-secondary',
						'text-primary-600', 'dark:text-primary-400', 'shadow-sm');
					t.classList.add('text-gray-600', 'dark:text-gray-400');
					// Reset text colors
					const tSpans = t.querySelectorAll('span');
					const tSvgs = t.querySelectorAll('svg path');
					tSpans.forEach(span => {
						span.style.color = '';
					});
					tSvgs.forEach(svg => {
						svg.style.fill = '';
					});
				});
				// Add active class to clicked tab
				this.classList.add('active', 'bg-white', 'dark:bg-dark-secondary',
					'text-primary-600', 'dark:text-primary-400', 'shadow-sm');
				this.classList.remove('text-gray-600', 'dark:text-gray-400');
				// Ensure text is visible for active tab
				const activeSpans = this.querySelectorAll('span');
				const activeSvgs = this.querySelectorAll('svg path');
				activeSpans.forEach(span => {
					if (document.body.classList.contains('dark')) {
						span.style.color = '#4dd0e1';
					} else {
						span.style.color = '#0891b2';
					}
				});
				activeSvgs.forEach(svg => {
					if (document.body.classList.contains('dark')) {
						svg.style.fill = '#4dd0e1';
					} else {
						svg.style.fill = '#0891b2';
					}
				});
				// Hide all tab contents
				tabContents.forEach(content => {
					content.classList.add('hidden');
					content.classList.remove('active');
				});
				// Show selected tab content
				const selectedContent = document.querySelector(
				`[data-tab-content="${targetTab}"]`);
				if (selectedContent) {
					selectedContent.classList.remove('hidden');
					selectedContent.classList.add('active');
				}
			});
		});
		// Category Selection Functionality
		var subjects = document.querySelectorAll('[name="TicketForm[subject]"]');
		[...subjects].forEach(el => {
			el.addEventListener('change', e => {
				const requestSection = document.querySelector('.therequest');
				const orderNumbersSection = document.querySelector('.ordernumbers');
				const orderNumbersInput = document.getElementById('ordernumbers');
				if (e.target.id !== 'subjectOrder') {
					if (requestSection) requestSection.classList.add('hidden');
					if (orderNumbersSection) orderNumbersSection.classList.add('hidden');
					if (orderNumbersInput) orderNumbersInput.removeAttribute('required');
				} else {
					if (requestSection) requestSection.classList.remove('hidden');
					if (orderNumbersSection) orderNumbersSection.classList.remove('hidden');
					if (orderNumbersInput) orderNumbersInput.setAttribute('required', 'required');
				}
			});
		});
	});
</script>

<script type="text/javascript">
	document.addEventListener("DOMContentLoaded", () => {
		$(document).ready(function() {
			$('#submit').click(function(e) {
				e.preventDefault();
				const form = $('#ticketsend')[0];
				if (!form.checkValidity()) {
					form.reportValidity();
					return;
				}
				var $btn = $(this);
				$btn.prop('disabled', true);
				$('#spinner').removeClass('hidden');
				$TheSubject = $('.subject:checked').val();
				$TheRequest = $('.second-options:checked').val();
				$FinalSubject = $('.subject:checked').val();
				if ($TheSubject == 'Order') {
					$final = "Order ID: " + $('#ordernumbers').val() + '\n' + 'Request: ' +
						$TheRequest + '\n\n' + $('#message').val();
				} else {
					$final = $('#message').val();
				}
				$('#alldata').val($final);
				$('.subject:checked').val($FinalSubject);
				$('#ticketsend').submit();
			});
		});
	});
</script>